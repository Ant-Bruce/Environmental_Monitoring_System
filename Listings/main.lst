C51 COMPILER V9.60.7.0   MAIN                                                              05/05/2023 16:30:06 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE Main\main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Public;.\Tool) DEBUG OBJEC
                    -TEXTEND PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "reg51.h"
   2          #include "intrins.h"
   3          #include "lcd1602.h"
   4          #include "xpt2046.h"
   5          #include "uart.h"
   6          #include "public.h"
   7          #include "dh11.h"
   8          #include "mq2.h"
   9          #include "beep.h"
  10          #include "esp8266.h"
  11          
  12          /****************************************************************************
  13          *函数名：main
  14          *输  入：无
  15          *输  出：无
  16          *功  能：主函数
  17          ****************************************************************************/
  18          void main(void)
  19          {
  20   1         uchar i,j;   
  21   1         uint value;  //存储MQ2数据
  22   1        
  23   1         //LcdInit();   //lcd1602初始化
  24   1      
  25   1         Uart_init(0XFA); //串口初始化
  26   1         //Delay1000ms();//给espwifi模块上电时间
  27   1      
  28   1         while(1)
  29   1         {  
  30   2            //DH11
  31   2            Delay1000ms();    //DHT11上电后要等待1S以越过不稳定状态在此期间不能发送任何指令
  32   2            DHT11_receive();
  33   2            LcdInit();   //lcd1602初始化
  34   2             
  35   2            LcdWriteCom(0x80);   //从lcd1602第一行第一个位置开始显示
  36   2            for(i=0;i<16;i++)
  37   2              LcdWriteData(wen_dat[i]);   //显示数据 
  38   2               
  39   2            //MQ2数据处理
  40   2            value=GetMQ2Value();  //获取MQ2数据
  41   2            value=value/15;
  42   2            MQ2Data(value);       //MQ2数据赋值
  43   2           
  44   2            LcdWriteCom(0xc0);   //从lcd1602第二行第一个位置开始显示
  45   2            for(j=0;j<16;j++)
  46   2              LcdWriteData(yanwu_dat[j]);   //显示数据
  47   2           
  48   2            Beep_warn(value);   //蜂鸣器报警函数
  49   2         
  50   2            ESP8266dat();   //存储需要8266上传的湿度，温度，烟雾浓度
  51   2            
  52   2            //串口发送数据
  53   2            Delay1000ms();
  54   2            Send_uart(dat_8266[0]);
C51 COMPILER V9.60.7.0   MAIN                                                              05/05/2023 16:30:06 PAGE 2   

  55   2            Send_uart(dat_8266[1]);
  56   2            Send_str("#");
  57   2            Send_uart(dat_8266[3]);
  58   2            Send_uart(dat_8266[4]);
  59   2            Send_str("#");
  60   2            Send_uart(dat_8266[6]);
  61   2            Send_uart(dat_8266[7]);
  62   2            Delay1000ms();
  63   2         }
  64   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    156    ----
   CONSTANT SIZE    =      2    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
